<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gocle.lxp.mapper.ApiClientMapper">

    <!-- Client 목록 -->
    <select id="selectClientList"
            resultType="com.gocle.lxp.dto.apikey.ApiClientResponse">
    <![CDATA[
        SELECT
            client_id   AS clientId,
            client_code AS clientCode,
            client_name AS clientName,
            status,
            created_at  AS createdAt
        FROM lxp_api_client
        ORDER BY client_id DESC
    ]]>
    </select>

    <!-- Client 등록 -->
    <insert id="insertClient">
    <![CDATA[
        INSERT INTO lxp_api_client (
            client_code,
            client_name,
            status,
            created_at
        ) VALUES (
            #{clientCode},
            #{clientName},
            'ACTIVE',
            NOW()
        )
    ]]>
    </insert>

    <!-- Client 수정 -->
    <update id="updateClient">
    <![CDATA[
        UPDATE lxp_api_client
        SET
            client_code = #{req.clientCode},
            client_name = #{req.clientName}
        WHERE client_id = #{clientId}
    ]]>
    </update>

    <!-- Client 상태 변경 -->
    <update id="updateClientStatus">
    <![CDATA[
        UPDATE lxp_api_client
        SET status = #{status}
        WHERE client_id = #{clientId}
    ]]>
    </update>
    
    <select id="selectClientById" parameterType="long" resultType="com.gocle.lxp.dto.apikey.ApiClientResponse">
	<![CDATA[
	    SELECT
	        client_id   AS clientId,
	        client_code AS clientCode,
	        client_name AS clientName,
	        status,
	        created_at  AS createdAt
	    FROM lxp_api_client
	    WHERE client_id = #{clientId}
	]]>
	</select>

</mapper>
